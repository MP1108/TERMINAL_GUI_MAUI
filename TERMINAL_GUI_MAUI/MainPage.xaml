<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:model="clr-namespace:TERMINAL_GUI_MAUI.Models_Maui"
    x:Class="TERMINAL_GUI_MAUI.MainPage"
    Title="🏪 Zarządzanie Produktami"
    BackgroundColor="#f8f9fa">

    <Grid RowDefinitions="Auto,Auto,*,Auto"
          Padding="20"
          RowSpacing="12">

        
        <VerticalStackLayout Grid.Row="0" Spacing="8">
            <Label Text="🏪 Zarządzanie Produktami" 
                   FontSize="24" 
                   FontAttributes="Bold" 
                   HorizontalOptions="Center" 
                   TextColor="#2c3e50"/>
            <Label x:Name="LiczbaProduktowLabel"
                   Text="Liczba produktów: 0" 
                   FontSize="14" 
                   HorizontalOptions="Center" 
                   TextColor="#7f8c8d"/>
        </VerticalStackLayout>

       
        <ScrollView Grid.Row="1" Orientation="Horizontal">
            <HorizontalStackLayout Spacing="10" HorizontalOptions="Center">
                <Button Text="➕ Dodaj" 
                        Clicked="DodajProdukt_Clicked" 
                        BackgroundColor="#27ae60" 
                        TextColor="White"
                        CornerRadius="8"
                        Padding="15,10"/>
                
                <Button Text="✏️ Edytuj" 
                        Clicked="EdytujProdukt_Clicked" 
                        BackgroundColor="#3498db" 
                        TextColor="White"
                        CornerRadius="8"
                        Padding="15,10"/>
                
                <Button Text="🗑️ Usuń" 
                        Clicked="UsunProdukt_Clicked" 
                        BackgroundColor="#e74c3c" 
                        TextColor="White"
                        CornerRadius="8"
                        Padding="15,10"/>
                
                <Button Text="📤 Eksport CSV" 
                        Clicked="Eksport_Clicked" 
                        BackgroundColor="#9b59b6" 
                        TextColor="White"
                        CornerRadius="8"
                        Padding="15,10"/>
            </HorizontalStackLayout>
        </ScrollView>

       
        <CollectionView
            x:Name="ProduktyList"
            Grid.Row="2"
            SelectionMode="Single"
            EmptyView="Brak produktów. Kliknij '➕ Dodaj' aby dodać nowy produkt."
            BackgroundColor="Transparent">
            
            <CollectionView.EmptyViewTemplate>
                <DataTemplate>
                    <StackLayout HorizontalOptions="Center" VerticalOptions="Center" Padding="40">
                        <Label Text="📦" FontSize="48" HorizontalOptions="Center"/>
                        <Label Text="Brak produktów" FontSize="18" HorizontalOptions="Center" TextColor="#7f8c8d"/>
                        <Label Text="Kliknij '➕ Dodaj' aby dodać nowy produkt" 
                               FontSize="14" 
                               HorizontalOptions="Center" 
                               TextColor="#bdc3c7"/>
                    </StackLayout>
                </DataTemplate>
            </CollectionView.EmptyViewTemplate>
            
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="model:Produkt">
                    <Frame
                        BorderColor="#e0e0e0"
                        CornerRadius="12"
                        Margin="4"
                        Padding="15"
                        BackgroundColor="White"
                        HasShadow="True">
                        
                        <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto,Auto,Auto">
                          
                            <Label Grid.Column="0" Grid.Row="0"
                                   Text="{Binding Nazwa}" 
                                   FontSize="18" 
                                   FontAttributes="Bold" 
                                   TextColor="#2c3e50"/>
                            
                        
                            <Label Grid.Column="1" Grid.Row="0"
                                   Text="{Binding Id, StringFormat='ID: {0}'}" 
                                   FontSize="12" 
                                   TextColor="#95a5a6"
                                   HorizontalOptions="End"/>
                            
                       
                            <Label Grid.Column="0" Grid.Row="1"
                                   Text="{Binding Cena, StringFormat='Cena: {0:C}'}" 
                                   FontSize="16" 
                                   TextColor="#27ae60"
                                   FontAttributes="Bold"/>
                            
                          
                            <Label Grid.Column="0" Grid.Row="2"
                                   Text="{Binding Kategoria, StringFormat='📁 Kategoria: {0}'}" 
                                   FontSize="14" 
                                   TextColor="#3498db"/>
                            
                          
                            <VerticalStackLayout Grid.Column="0" Grid.Row="3" Spacing="2">
                                <Label Text="{Binding DataUtworzenia, StringFormat='📅 Utworzono: {0:dd/MM/yyyy HH:mm}'}"
                                       FontSize="10"
                                       TextColor="#7f8c8d" />
                                <Label Text="{Binding DataModyfikacji, StringFormat='✏️ Modyfikacja: {0:dd/MM/yyyy HH:mm}'}"
                                       FontSize="10"
                                       TextColor="#7f8c8d" />
                            </VerticalStackLayout>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
        
        <VerticalStackLayout Grid.Row="3" Spacing="8">
            <Label Text="📋 Dziennik systemowy:" 
                   FontSize="14" 
                   FontAttributes="Bold" 
                   TextColor="#2c3e50"/>
            
            <Frame BackgroundColor="#ecf0f1" 
                   CornerRadius="8" 
                   Padding="0" 
                   HasShadow="False">
                <Editor
                    x:Name="LogBox"
                    HeightRequest="120"
                    IsReadOnly="True"
                    BackgroundColor="Transparent"
                    TextColor="#2c3e50"
                    Placeholder="Dziennik systemowy..."
                    AutoSize="TextChanges"
                    FontSize="12"
                    Margin="10"/>
            </Frame>
        </VerticalStackLayout>
    </Grid>
</ContentPage>